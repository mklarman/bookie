<% @my_date %>
<% self.get_time %>

<div id="pool_index_head">FANISIDE POOLS</div>

<div id="pools_index_cont">
	
	<div id="fan_rules">
		
		<div id="rules_head">GAME RULES</div>

		<div id="rules_text">
			
			<p>This half fantasy half suicide pool game tasks the entrants to pick the highest scoring fantasy player from a group of players.</p>

			<p>Player Groups can contain anywhere from 2 - 5 players.  If two players tie for the most points, then a selection of either will win.</p>

			<p>Player Groups are formed randomly for each pool.  You can pick the same player as many times as you want, as long as they are in your group.</p>

			<p>All Entrants in a pool select from the same group of players.</p>

			<p>Pools continue until there is one person remaining, or all remaining contestants are knocked out at the same time.  If that happens then those Entrants tie for the win.</p>

			<p>Your player group will appear on your pool's homepage after the commissioner has submited the resutls from the night before.  The group will be available to pick from until 7pm eastern time.</p>

			<p>If you fail to submit a pick on a night your pool has a player group available then you will be eliminated.  Player Groups will be generated by the league commissioner once they submit results from the night before.</p>

			<p>Entrants lose the abilty to make a selection once they are eliminated but they still have access to the standings and selections of others to follow the pool.</p>

			<p>You can play in as many pools as you want at the same time.</p>




		</div>







	</div>

	<div id="new_pool">
		
		<%= form_for @pool do |p| %>

			<div> <%= p.hidden_field :commish_id, :value => current_user.id %></div>
			<div> <%= p.hidden_field :date, :value => @my_date %></div>
			<div> SPORT: <%= p.text_field :sport %></div>
			<div> PASSWORD: <%= p.text_field :pass %></div>
			<div> POOL NAME: <%= p.text_field :pool_name %></div>
			<%= p.submit %>


		<% end %>

		<div id="create_pool_label">CREATE POOL</div>

<div id="pool_create_cont">

	<div class="pool_fields">
		
		Pool Name: <input type="text" name="" id="pool_name">


	</div>
	
	<div class = "pool_fields">
		
		Password: <input type="text" name="password" id="pass">

	</div>
	
	

	
	

	<input type="submit" name="" value="Create Pool" id="sub_btn">




</div>



<script>
	
	var subBtn = document.getElementById("sub_btn")
	var pass = document.getElementById("pass")
	var clientNum = document.getElementById("client_number")
	var stat = document.getElementById("stat_choice")
	var leagueName = document.getElementById("league_name")
	var leagueNm = document.getElementById("league_league_name")
	var leaguePass = document.getElementById("league_pass")
	var leagueClients = document.getElementById("league_clients")
	var leagueStatus = document.getElementById("league_status")
	var endDay = document.getElementById("end_day")
	var endMonth = document.getElementById("end_month")
	var endYear = document.getElementById("end_year")
	var endDate = document.getElementById("league_end_date")
	var date
	
	subBtn.addEventListener("click", function(){

		var pass_holder = []

		var passW = " "

		var test = false

		<% League.all.each do |l| %>

			<% if l.status == "private" %>



				passW = "<%= l.pass %>"

				pass_holder.push(passW)


			<% end %>




		<% end %>

		console.log(pass_holder)
		console.log(pass.value)

		for(i=0; i<pass_holder.length; i++){

			if (pass_holder[i] == pass.value){

				test = true
			}
		}

		console.log(test)

		if (test == true){

			alert("PASSWORD FOR LEAGUE IS TAKEN")
		}else{


			date = endDay.value + " " + endMonth.value + " " + endYear.value

			leagueNm.value = leagueName.value
			leaguePass.value = pass.value
			leagueClients.value = clientNum.value
			leagueStatus.value = stat.value
			endDate.value = date

			new_league.submit()

		}

		




	})

</script>




	</div>













</div>